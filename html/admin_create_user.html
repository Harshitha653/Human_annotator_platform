<!doctype html>
<html>
<head><meta charset="utf-8"><title>Create User</title><link rel="stylesheet" href="/static/css/styles.css"></head>
<body>
  <header class="header-bar">
    <a href="/admin">Admin</a> | <a href="/annotation">Workspace</a> | <button onclick="logout()">Logout</button>
  </header>
  <div class="center-box">
    <h2>Create User (Admin)</h2>
    <input id="newUser" placeholder="username"><br><br>
    <input id="newPass" placeholder="password" type="password"><br><br>
    <select id="newRole"><option value="user">user</option><option value="admin">admin</option></select><br><br>
    <button onclick="createUser()">Create</button>
    <div id="msg"></div>
  </div>
<script>
async function createUser(){
  const u=document.getElementById('newUser').value;
  const p=document.getElementById('newPass').value;
  const r=document.getElementById('newRole').value;
  const headers = getAuthHeaders();
  headers['Content-Type']='application/json';
  const res = await fetch('/api/auth/register', { method:'POST', headers: headers, body: JSON.stringify({username:u,password:p,role:r})});
  const j = await res.json();
  document.getElementById('msg').textContent = j.ok ? 'Created: '+j.user.username : ('Error: '+j.error);
}
</script>
<script src="/static/js/auth.js"></script>
</body>
</html>
